<header ng-if="!app.state.current.data.hideMenu" class="hidden-print" id="top-header">
  <div class="overlay-container"></div>
  <!-- Brand Bar -->
  <ng-include src="'templates/brand-bar.html'"></ng-include>

  <div id="menu" class="menu">
    <div class="container">
      <div class="row">
        <!-- TODO refactor this out into it's own directive, that uses the login and registration directives. The new directive should take an argument that is the internal directive (login and/or registration)* -->
        <div class="col-xs-12 menu__container">

          <div class=""><!--removed class navbar-header-->

            <!--HAMBURGER MENU-->
            <div ng-class="{show: menu.isMobileShowing}">
              <button type="button" class="nav__side--toggle navbar-left hidden-md hidden-lg hidden-xl" ng-click="app.openAside('left', true)">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>

            <!--LOGO-->
            <a class="navbar-brand logo" ui-sref="content({link:'/'})" href="/">
              <svg viewBox="0 0 800.416 115.217" class="icon-logo">
              	<use xlink:href="#logo"></use>
              </svg>
            </a>

            <!--MOBILE SEARCH ICON-->
            <div ng-class="{show: menu.isMobileShowing}">
              <a ui-sref="search" class="pull-right hidden-md hidden-lg hidden-xl mobile-search">
                <svg viewBox="0 0 32 32" class="icon icon-large icon-search3"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search3"></use></svg>
              </a>
            </div>

            <!--PROFILE ICON AND DROPDOWN-->
            <div class="pull-right hidden-xs hidden-sm" dropdown on-toggle="toggled(open)">
              <a href="#" id="user-dropdown" class="mobile-account" ng-if="$root.username != undefined" dropdown-toggle title="{{$root.username}}">
                <profile-picture-view class="nav-profile-image"/>
              </a>
              <ul class="dropdown-menu ng-cloak" aria-labelledby="user-dropdown" ng-show="$root.username != undefined" ng-cloak>
                <li>
                  <a ui-sref="profile.personal">{{$root.username}}</a>
                </li>
                <li role="separator" class="divider"></li>
                <li>
                  <a ui-sref="profile.personal">My Profile</a>
                </li>
                <li>
                  <a ui-sref="giving_history">Giving History</a>
                </li>
                <li>
                  <a ui-sref="serve-signup">Sign Up to Serve</a>
                </li>
                <li>
                  <a ui-sref="grouptool.mygroups">My Groups</a>
                </li>
                <li>
                  <a ui-sref="mytrips">My Trips</a>
                </li>
                <li>
                  <a ui-sref="camps-dashboard">My Camps</a>
                </li>
                <li>
                  <a ui-sref="childcare-dashboard">Childcare</a>
                </li>
                <li>
                  <a ui-sref="logout" class="ng-cloak">Sign Out</a>
                </li>
              </ul>
            </div>

            <!--LOGIN BUTTON AND DROPDOWN-->
            <ul class="pull-right navbar--login list-unstyled hidden-xs hidden-sm">
              <li class="" data-toggle="dropdown" ng-show="$root.username == undefined">
                <button class="btn btn-standard" id="form-toggle" ng-click="toggleDesktopLogin(); passwordPrefix='login-dropdown'">
                  <span>Sign In</span>
                </button>
              </li>
              <li>
                <ul class="navbar--login__dropdown list-unstyled col-md-3 soft-top soft-sides" role="menu" aria-labelledby="dropdownMenu1" ng-class="{toggleOpen: loginShow}">
                  <li role="presentation">
                    <div class="navbar--register__container">
                      <div class="dd_menu">
                        <login-form register-url="register"></login-form>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>

            <!--MAIN NAV MENU-->
            <ng-include src="'templates/nav.html'"> </ng-include>

          </div><!--navbar-header-->

        </div><!--/col-->
      </div><!--/row-->
    </div><!--/container-->
  </div><!--/#menu-->
</header>
